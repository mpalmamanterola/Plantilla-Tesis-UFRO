\documentclass{beamer}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\usepackage{outlines}
\usepackage{bookmark}
\usepackage{graphicx}
\usepackage[font=tiny]{caption}
\usepackage[export]{adjustbox}
\setbeamertemplate{caption}[numbered]
\usepackage{amsmath,amssymb,lmodern}

\usetheme{Warsaw}
\usecolortheme{default}

%------------------------------------------------------------
%This block of code defines the information to appear in the
%Title page
\title[Aumento de resolución a través del modelo \textit{Random Forest}] %optional
{Reducción de escala de datos satelitales}

\subtitle{a través del modelo de Bosque Aleatorio}

\author[] % (optional)
{Matías Palma Manterola}

\institute[UFRO] % (optional)
{
Universidad de La Frontera
}

\date[] % (optional)
{Octubre, 2022}

\logo{\includegraphics[height=1.3cm]{images/ufro.jpg}}

\AtBeginSection[]
{
  \begin{frame}
    \frametitle{Tabla de Contenidos}

    \tableofcontents[currentsection]
  \end{frame}
}
%------------------------------------------------------------


\begin{document}

%The next statement creates the title page.
  \frame{\titlepage}

  \section{Introducción}

  \subsection*{Contexto y descripción del problema}

  \begin{frame}
    \frametitle{Contexto y descripción del problema}

    \begin{columns}

      \begin{column}{0.5\textwidth}
        \begin{outline}
          \1 {Almacén de aguas subterráneas.}
            \2 Calidad.
            \2 Cantidad.
            \2 Ampliamente distribuidas.
          \1{Sobrexplotación.}
            \2 Disminución del nivel.
          \1 {Monitoreo de cuencas.}
          \1 {Satélite GRACE.}
            \2 Estimación del agua total presente.
        \end{outline}
      \end{column}

      \begin{column}{0.5\textwidth}
        \begin{center}
          \includegraphics[width=0.9\textwidth]{images/sequía.png}
        \end{center}
      \end{column}

    \end{columns}

  \end{frame}

  \subsection*{GRACE}

  \begin{frame}
    \frametitle{Satélite GRACE}

    \begin{columns}

      \begin{column}{0.6\textwidth}
        \begin{outline}
          \1 \textit{Gravity Recovery And Climate Experiment.}
          \1 Satélites que orbitan sobre la Tierra.
            \2 200 Km de distancia entre ellos.
          \1 Captar movimientos de las aguas.
          \2 Contrarrestar:
            \3 Sequías. 
            \3 Inundaciones.
            \3 Socavones.
          \1 Mediciones a baja resolución.
        \end{outline}
      \end{column}

      \begin{column}{0.5\textwidth}
        \begin{figure}
          \begin{center}
            \includegraphics[width=0.9\textwidth]{images/GRACE.jpg}
          \end{center}
          \caption{\tiny{Misión GRACE lanzada el año 2002.}}
        \end{figure}
      \end{column}

    \end{columns}

  \end{frame}

  \begin{frame}
    \frametitle{Anomalías \textit{TWS}}

    \begin{outline}
      \1 \textit{Terrestrial Water Storage}
      \1 Agua almacenada sobre y debajo de la superficie.
        \2 Agua de dosel.
        \2 Ríos y lagos.
        \2 Humedad de suelo.
        \2 Aguas subterráneas.
    \end{outline}

    \begin{block}{Anomalía TWS}
      $$ TWS_t = \frac{TWS_t - \mu}{\delta},~~~~ \mu, \delta \in \mathbb{R}$$
    \end{block}

  \end{frame}

  \subsection*{Reducción de escala}

  \begin{frame}
    \frametitle{\textit{Downscaling}}

    \begin{columns}

      \begin{column}{0.4\textwidth}
        \begin{outline}
          \1 Inferir información de alta resolución.
            \2 Datos satelitales.
            \2 Imágenes.
          \1 Enfoques dinámicos o estadísticos.
            \2 Meteorología.
            \2 Climatología
            \2 Teledetección
        \end{outline}
      \end{column}
      
      \begin{column}{0.6\textwidth}
        \begin{figure}
          \begin{center}
            \includegraphics[width=\textwidth]{images/downscaling_example.png}
          \end{center}
          \caption{Reducción de escala.}
        \end{figure}
      \end{column}
    \end{columns}
  \end{frame}

  \subsection*{Objetivos}

  \begin{frame}
    \frametitle{Objetivo general y específicos}

    \large\textbf{Objetivo general}
    \begin{outline}
      \1 Implementar un aumento de resolución a datos satelitales proporcionados por GRACE a través de un modelo
      predictivo para obtener productos grillados en Chile a alta resolución.
    \end{outline}

    \large\textbf{Objetivos específicos} 
    \begin{outline}
      \1 Definir la metodología.
      \1 Recolectar datos necesarios.
      \1 Preprocesar los datos.
      \1 Implementar y entrenar el modelo predictivo.
      \1 Validar predicciones en base a observaciones \textit{in situ}.
    \end{outline}

  \end{frame}

  \section{Fundamentos Teóricos}

  \subsection*{Modelo del bosque aleatorio}

  \begin{frame}
    \frametitle{Árboles de decisión}

    \begin{outline}
      \1  Algoritmo de aprendizaje automático del tipo supervisado.
      \1 Segmentación recursiva del espacio de predicción en regiones regulares.
        \2 Media. 
        \2 Moda.
      \1 Posee ciertas desventajas
        \2 Inestabilidad.
        \2 Rendimiento predictivo menor al optimal.
      \1 Minimiza la suma de cuadrados de cada región.
    \end{outline}
  \end{frame}

  \begin{frame}
    \frametitle{\textit{Random Forest}}

    \begin{outline}
      \1 Conjunto de árboles de decisión.
        \2 \textit{Bootstrap sample}.
      \1 Contrarresta la inestabilidad de los árboles.
      \1 Mejor generalización en la predicción.
      \1 Menos susceptible al sobreajuste.
    \end{outline}
  \end{frame}

  \subsection*{Indice de Correlación de Pearson}

  \begin{frame}
    \frametitle{Indice de Correlación de Pearson}

    \begin{outline}
      \1 Busca cuantificar la similitud lineal en las tasas de crecimiento.
    \end{outline}

    \begin{block}{Indice de Correlación}
      Sean $ S_1 $ y $ S_2 $ dos series temporales con observaciones $ u_1,\cdots, u_p $ y $ v_1,\cdots,v_p $, respectivamente, entonces
      $$ R^2(S_1,S_2) = \frac{\sum_{j=1}^p\sum_{i=1}^p(u_i-u_j)(v_i-v_j)} {\sqrt{\sum_{i=1}^p(u_i-u_j)^2}\sqrt{\sum_{i=1}^p(v_i-v_j)^2}} \in [-1,1]$$
    \end{block}

  \end{frame}

  \section{Metodología}
  \subsection*{Metodología propuesta}

  \begin{frame}
    \frametitle{Downscaling of GRACE-Derived Groundwater Storage Based on the Random Forest Model}

    \begin{figure}
      \begin{center}
        \includegraphics[height=0.835\textheight]{images/metodologia_Chen_etal2019.png}
      \end{center}
  \end{figure}
    
  \end{frame}

  \subsection*{Recolección y preprocesamiento de datos}

  \begin{frame}
    \frametitle{Dominio espacio-temporal}

    \begin{outline}
      \1 Territorio continental chileno.
        \2 Longitud desde 63.5°E hasta 79.5°E.
        \2 Latitud 16.5°S hasta 69.5°S
      \1 Aumento de resolución de productos grillados desde abril del año 2002 hasta febrero del año 2017.
    \end{outline}
  \end{frame}

  \begin{frame}
    \frametitle{GRACE TWS}
    \begin{columns}

      \begin{column}{0.5\textwidth}
        \begin{outline}
          \1 Anomalías TWS.
          \1 Datos globales mensuales.
          \1 Resolución a 1° ($\sim 110$ Km).
          \1 \texttt{lwe\_thickness}: grosor de agua líquida equivalente.
        \end{outline}
      \end{column}

      \begin{column}{0.5\textwidth}
        \centering
        \includegraphics[height=0.8\textheight]{images/GRACE_init.png}
      \end{column}

    \end{columns}
  \end{frame}

  \begin{frame}
    \frametitle{ERA5-Land}
    \begin{outline}
      \1 Representa la evolución de variables terrestres.
        \2 Humedad de suelo.
        \2 Nieve equivalente en agua.
        \2 Evapotranspiración.
        \2 Agua de dosel.
        \2 Escorrentía.
      \1 Combina datos de modelos con observaciones.
      \1 Datos globales mensuales
      \1 Resolución de 0.1° ($\sim$ 9 Km)
    \end{outline}

  \end{frame}

  \begin{frame}
    \frametitle{(CR)$^2$-met}

    \begin{outline}
      \1 Información meteorológica
        \2 Precipitación.
        \2 Temperatura.
      \1 Datos muestreados diariamente para el territorio continental.
      \1 Modelos estadísticos para traducir diversos componentes.  
      \1 Resolución de 0.05° ($\sim$ 5 Km)
    \end{outline}

  \end{frame}

  \begin{frame}
    \frametitle{Dirección General de Aguas}

    \begin{columns}
    
      \begin{column}{0.5\textwidth}
        \begin{outline}
          \1 Observaciones de pozos de bombeo.
          \1 Mediciones diarias para la zona centro y norte del país.
          \1 Mide profundidad (m) del pozo.
            \2 Mayor profundidad implica menor cantidad de agua disponible.
        \end{outline}
      \end{column}

      \begin{column}{0.5\textwidth}
        \centering
        \includegraphics[height=0.78\textheight]{images/Observacion_pozos.jpeg}
      \end{column}

    \end{columns}
  \end{frame}

  \begin{frame}
    \frametitle{Remuestreo espacial}
  \end{frame}

  \begin{frame}
    \frametitle{Remuestreo temporal}
  \end{frame}

  \subsection*{Entrenamiento y testeo}

  \begin{frame}
    \frametitle{Conjunto de entrenamiento y de prueba}

    \begin{columns}

      \begin{column}{0.5\textwidth}
        \begin{outline}
          \1 Alta variabilidad climatológica en el territorio.
          \1 Estratificación de datos.
            \2 Disminución de sesgo.
            \2 Predicciones coherentes respecto a la naturaleza de las variables.
        \end{outline}
      \end{column}

      \begin{column}{0.5\textwidth}
        \begin{figure}
          \begin{center}
            \includegraphics[height=0.7\textheight]{images/macrozonas.png}
          \end{center}
          \caption{Macrozonas de Chile.}
        \end{figure}
      \end{column}

    \end{columns}
  \end{frame}

  \subsection*{Implementación del modelo}
  
  \begin{frame}
    \frametitle{Implementación del modelo}
  \end{frame}

  \section{Resultados}

  \subsection*{Métricas de validación}

  \begin{frame}
    \frametitle{Métricas de validación}

    \begin{center}
      \begin{tabular}{| c | c | c |}
        \hline
        Modelo RF& MAE & RMSE\\ \hline
        Minimización mse &  $5.69\times 10^{-3}$ & $6.23 \times 10^{-5}$\\
        Minimización mae &  $6.15\times 10^{-3}$ & $7.25 \times 10^{-5}$\\
        \hline
      \end{tabular}
      
    \end{center}

    \begin{columns}

      \begin{column}{0.5\textwidth}
        \begin{figure}
          \centering
          \includegraphics[width=\textwidth]{images/MAE_RFmodels.png}
          \caption{Error medio absoluto}
        \end{figure}
      \end{column}

      \begin{column}{0.5\textwidth}
        \begin{figure}
          \centering
          \includegraphics[width=\textwidth]{images/RMSE_RFmodels.png}
          \caption{Raíz del error cuadrático medio}
        \end{figure}
      \end{column}
    \end{columns}
  \end{frame}

  \subsection*{Productos finales}

  \begin{frame}
    \frametitle{}

    \begin{columns}

      \begin{column}{0.5\textwidth}
        \includegraphics[height=\textheight, right]{images/Before_Downscalling_v0-09-02.jpeg}
      \end{column}

      \begin{column}{0.5\textwidth}
        \centering
        \includegraphics[height=\textheight, left]{images/Downscalling_v0-09-02.jpeg}
      \end{column}

    \end{columns}
  \end{frame}

  \begin{frame}
    \frametitle{}

    \begin{columns}

      \begin{column}{0.5\textwidth}
        \includegraphics[height=\textheight, right]{images/Before_Downscalling_v0-06-14.jpeg}
      \end{column}

      \begin{column}{0.5\textwidth}
        \centering
        \includegraphics[height=\textheight, left]{images/Downscalling_v0-06-14.jpeg}
      \end{column}

    \end{columns}
  \end{frame}

  
  \begin{frame}
    \frametitle{}

    \begin{columns}

      \begin{column}{0.5\textwidth}
        \centering
        \includegraphics[height=\textheight, right]{images/GRACE_mapv1-04-17.jpeg}
      \end{column}

      \begin{column}{0.5\textwidth}
        \includegraphics[height=\textheight, left]{images/Downscalling_mapv1-04-17.jpeg}
      \end{column}

    \end{columns}

  \end{frame}

  \subsection*{Validación de datos}

  \begin{frame}
    \frametitle{}
  \end{frame}

  \section{Conclusiones}

  \begin{frame}
    \frametitle{}
  \end{frame}

\end{document}